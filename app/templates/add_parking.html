{% extends 'base.html' %}

{% block content %}
<div class="form-style-10">
    <h1>Добавить парковку</h1>
    <div class="inner-wrap">
        <a href="{{ url_for('index') }}" class="button">Назад в основное меню</a>

        <!-- Форма для добавления парковки -->
        <form method="POST" action="{{ url_for('add_or_update_parking') }}">
            {{ form.hidden_tag() }}

            {{ form.address.label }}
            {{ form.address(placeholder="Введите адрес парковки") }}
            {% for error in form.address.errors %}
                <span style="color: red;">{{ error }}</span>
            {% endfor %}

            {{ form.opened.label }}
            {{ form.opened() }}

            {{ form.count_place.label }}
            {{ form.count_place(placeholder="Введите общее количество мест") }}
            {% for error in form.count_place.errors %}
                <span style="color: red;">{{ error }}</span>
            {% endfor %}

            {{ form.count_available_places.label }}
            {{ form.count_available_places(placeholder="Введите количество свободных мест") }}
            {% for error in form.count_available_places.errors %}
                <span style="color: red;">{{ error }}</span>
            {% endfor %}

            {{ form.submit() }}
        </form>

        {% if success and parking %}
        <h2>Парковка успешно добавлена/обновлена:</h2>
        <table class="customTable">
            <tr>
                <th>ID</th>
                <th>Адрес</th>
                <th>Открыта</th>
                <th>Количество мест</th>
                <th>Количество свободных мест</th>
            </tr>
            <tr>
                <td>{{ parking.id }}</td>  <!-- Отображаем данные одной парковки -->
                <td>{{ parking.address }}</td>
                <td>{{ 'Да' if parking.opened else 'Нет' }}</td> <!-- Проверяем булевое значение -->
                <td>{{ parking.count_place }}</td>
                <td>{{ parking.count_available_places }}</td>
            </tr>
        </table>

        {% elif error %}
        <p style="color: red;">Ошибка: {{ error }}</p>  <!-- Отображение ошибок -->
        {% endif %}
    </div>
</div>
{% endblock %}
